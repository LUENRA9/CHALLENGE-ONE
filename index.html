<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="css/reset.css">
        <link rel="stylesheet" href="css/style.css">
    </head>
    <header>
        <title>Primer Challenge</title>
    </header>
    <body>
        
        <div class="myPopUp" id="popUp">
            <div class="pop">
                <p>INGRESE UN TEXTO PRIMERO</p>
                <input value="CERRAR" type="button" class="close" onclick="closePop()">     
            </div>
        </div>
        <div class="background">
            <img class="logoA" src="resources/Vector.png" >
            
            <div class="myPopUp" id="popUp">
                <div class="pop">
                    <p>INGRESE UN TEXTO PRIMERO</p>
                    <input value="CERRAR" type="button" class="close" onclick="closePop()">     
                </div>
            </div>
           
            

        
            <form >
                <textarea class="insertText" placeholder="Ingrese el texto aqui" id="textToEncrip" required></textarea>
                <input type="button" value="Encriptar" class="encriptar" onclick="ValidateEncrypt()">
                <input type="button" value="Desencriptar" class="desencriptar" onclick="ValidateDecrypt()">
                
            </form>
            
            <div class="rectangulo">
                <input id="copy" type="submit" value="Copiar" class="copiar">
                <img id="imgRect" class="mujerBuscando" src="resources/Muñeco.png">
                <p id="msgResponse" class="mensajeResponse"></p>
                <p id="msg1" class="mensajeDefault">Ningún mensaje fue encontrado</p>
                <p id="msg2" class="mensajeDefaultDown">Ingresa el texto que desees encriptar o desencriptar.</p>
            </div>

            

           
            <div class="warning">
                <p><img src="resources/bi_exclamation-circle-fill.png">&nbsp&nbspSolo letras minúsculas y sin acentos</p>
            </div>

           

        </div>

        
        

        

        
    </body>
</html>
<script>
    function ValidateEncrypt() {
 
        if(document. getElementById("textToEncrip").value.length == 0) {       
            document.getElementById("popUp").style="display:inline-block;";   
        }else{
            encryptF();
        }
    }
    function ValidateDecrypt() {
 
        if(document. getElementById("textToEncrip").value.length == 0) {       
            document.getElementById("popUp").style="display:inline-block;";   
        }else{
            decryptF();
        }
    }
    function encryptF(){
        var textToEncrip=document.getElementById("textToEncrip").value;
        var textEncripted="";
        for(index=0;index<textToEncrip.length;index++){
            
            switch(textToEncrip[index]){
                case 'e':
                    textEncripted+="enter"
                    break;
                case 'i':
                    textEncripted+="imes"
                    break;
                case 'a':
                    textEncripted+="ai"
                    break;
                case 'o':
                    textEncripted+="ober"
                    break;
                case 'u':
                    textEncripted+="ufat"
                    break;
                default:
                    textEncripted+=textToEncrip[index];
            }
        }
        document.getElementById("msgResponse").innerText=textEncripted;
        cleanResultBox();
    }
    function decryptF(){
        var textToDecrypt=document.getElementById("textToEncrip").value;
        
        var textDecrypt="";
        
        for(index=0;index<textToDecrypt.length;index++){
           
             
             
           
           
            if(textToDecrypt.includes("enter",index)){
                if(textToDecrypt[index]=="e"){
                    textDecrypt+="e";
                    console.log("final enter: "+textDecrypt);
                    index+=5;
                }
            }
            if(textToDecrypt.includes("imes",index)){
                if(textToDecrypt[index]=="i"){
                    textDecrypt+="i";
                    console.log("final imes: "+textDecrypt);
                    index+=4;
                }
            }
            if(textToDecrypt.includes("ai",index)){
                if(textToDecrypt[index]=="a"){
                    textDecrypt+="a";
                    console.log("final ai: "+textDecrypt);
                    index+=2;
                    console.log("AI DESPUES: "+textToDecrypt[index])
                }
            }
            if(textToDecrypt.includes("ober",index)){
                if(textToDecrypt[index]=="o"){
                    textDecrypt+="o";
                    console.log("final ober: "+textDecrypt);
                    index+=4;
                }
            }
            if(textToDecrypt.includes("ufat",index)){
                if(textToDecrypt[index]=="o"){
                    console.log(textToDecrypt[index]);
                    textDecrypt+="u";
                    console.log("final ufat: "+textDecrypt);
                    index+=4;
                }
            }
            if(index<=textToDecrypt.length-1){
            textDecrypt+=textToDecrypt[index];

            console.log("final 1: "+textDecrypt);

            }
            
            
            
        }
        document.getElementById("msgResponse").innerText=textDecrypt;
        cleanResultBox();
    }

    function closePop(){
        
        document.getElementById("popUp").style="display:none;";
    }
    function cleanResultBox(){
        document.getElementById("textToEncrip").value="";
        document.getElementById("imgRect").style="display:none;";
        document.getElementById("msg1").style="display:none;";
        document.getElementById("msg2").style="display:none;";
        document.getElementById("copy").style="display:inline-block;";

     
    }

   
</script>