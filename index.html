<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="css/reset.css">
        <link rel="stylesheet" href="css/style.css">
    </head>
    <header>
        <title>Primer Challenge</title>
    </header>
    <body>
        
        <div class="myPopUp" id="popUp">
            <div class="pop">
                <p>INGRESE UN TEXTO PRIMERO</p>
                <input value="CERRAR" type="button" class="close" onclick="closePop()">     
            </div>
        </div>
        <div class="background">
            <img class="logoA" src="resources/Vector.png" >
            
            <div class="myPopUp" id="popUp">
                <div class="pop">
                    <p>INGRESE UN TEXTO PRIMERO</p>
                    <input value="CERRAR" type="button" class="close" onclick="closePop()">     
                </div>
            </div>
           
            

        
            <form >
                <textarea class="insertText" placeholder="Ingrese el texto aqui" id="textToEncrip" required></textarea>
                <input type="button" value="Encriptar" class="encriptar" onclick="ValidateEncrypt()">
                <input type="button" value="Desencriptar" class="desencriptar" onclick="ValidateDecrypt()">
                
            </form>
            
            <div class="rectangulo">
                <input id="copyB" type="button" value="Copiar" class="copiar" onclick="copyText()" >
                <img id="imgRect" class="mujerBuscando" src="resources/Muñeco.png">
                <p id="msgResponse" class="mensajeResponse"></p>
                <p id="msg1" class="mensajeDefault">Ningún mensaje fue encontrado</p>
                <p id="msg2" class="mensajeDefaultDown">Ingresa el texto que desees encriptar o desencriptar.</p>
            </div>

            

           
            <div class="warning">
                <p><img src="resources/bi_exclamation-circle-fill.png">&nbsp&nbspSolo letras minúsculas y sin acentos</p>
            </div>
            <div class="autor">
                <p>&#129302; Realizado por Luis Enrique Ramos Evangelista &nbsp&nbsp<a href="https://linktr.ee/luenra"> Contacto</a></p>
            </div>

           

        </div>
 
    </body>
</html>


<script>
    function ValidateEncrypt() {
 
        if(document. getElementById("textToEncrip").value.length == 0) {       
            document.getElementById("popUp").style="display:inline-block;";   
        }else{
            encryptF();
        }
    }
    function ValidateDecrypt() {
 
        if(document. getElementById("textToEncrip").value.length == 0) {       
            document.getElementById("popUp").style="display:inline-block;";   
        }else{
            decryptF();
        }
    }
    function encryptF(){
        var textToEncrip=document.getElementById("textToEncrip").value;
        var textEncripted="";
        for(index=0;index<textToEncrip.length;index++){
            
            switch(textToEncrip[index]){
                case 'e':
                    textEncripted+="enter"
                    break;
                case 'i':
                    textEncripted+="imes"
                    break;
                case 'a':
                    textEncripted+="ai"
                    break;
                case 'o':
                    textEncripted+="ober"
                    break;
                case 'u':
                    textEncripted+="ufat"
                    break;
                default:
                    textEncripted+=textToEncrip[index];
            }
        }
        document.getElementById("msgResponse").innerText=textEncripted;
        cleanResultBox();
    }
    function decryptF(){
        var textToDecrypt=document.getElementById("textToEncrip").value;
        
        var textDecrypt="";
        
        for(index=0;index<textToDecrypt.length;index++){
           
            if(textToDecrypt.substring(index,index+5)=="enter"){
                textDecrypt+="e";
                index+=5;              
            }
            if(textToDecrypt.substring(index,index+4)=="imes"){            
                textDecrypt+="i";
                index+=4;
            }
            if(textToDecrypt.substring(index,index+2)=="ai"){
                textDecrypt+="a";
                index+=2;
            }
            if(textToDecrypt.substring(index,index+4)=="ober"){
                textDecrypt+="o";
                index+=4;
                
            }
            if(textToDecrypt.substring(index,index+4)=="ufat"){
                textDecrypt+="u";
                index+=4;
            }
            
            if(textToDecrypt.substring(index,index+5)=="enter"
                || textToDecrypt.substring(index,index+4)=="imes"
                || textToDecrypt.substring(index,index+2)=="ai"
                || textToDecrypt.substring(index,index+4)=="ober"
                || textToDecrypt.substring(index,index+4)=="ufat"){
               index=index-1;
            }else if(index<textToDecrypt.length){
                textDecrypt+=textToDecrypt[index];
            }
        }
        document.getElementById("msgResponse").innerText=textDecrypt;
        cleanResultBox();
    }

    function closePop(){
        
        document.getElementById("popUp").style="display:none;";
    }
    function cleanResultBox(){
        document.getElementById("textToEncrip").value="";
        document.getElementById("imgRect").style="display:none;";
        document.getElementById("msg1").style="display:none;";
        document.getElementById("msg2").style="display:none;";
        document.getElementById("copyB").value="copiar";
        document.getElementById("copyB").style="display:inline-block;";

     
    }

    function copyText(){
        
        var texto=document.getElementById("msgResponse").textContent;
        document.getElementById("copyB").value="COPIADO";
        
        console.log(texto);

        navigator.clipboard.writeText(texto);
    }

   
</script>